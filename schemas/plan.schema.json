{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/plan.schema.json",
  "type": "object",
  "additionalProperties": false,
  "required": ["summary", "success_criteria", "tasks", "schedule"],
  "properties": {
    "summary": { "type": "string", "minLength": 1, "maxLength": 800 },
    "success_criteria": {
      "type": "array",
      "items": { "type": "string", "minLength": 1, "maxLength": 200 },
      "minItems": 3,
      "maxItems": 8
    },
    "tasks": {
      "type": "array",
      "minItems": 3,
      "maxItems": 20,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["title", "description", "priority", "estimate_hours"],
        "properties": {
          "title": { "type": "string", "minLength": 3, "maxLength": 140 },
          "description": { "type": "string", "minLength": 1, "maxLength": 1000 },
          "priority": { "type": "string", "enum": ["P1", "P2", "P3"] },
          "estimate_hours": { "type": "number", "minimum": 0, "maximum": 100 }
        }
      }
    },
    "schedule": {
      "type": "object",
      "additionalProperties": false,
      "required": ["days"],
      "properties": {
        "days": {
          "type": "array",
          "minItems": 1,
          "maxItems": 14,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["day_offset", "task_titles"],
            "properties": {
              "day_offset": { "type": "integer", "minimum": 0, "maximum": 30 },
              "task_titles": {
                "type": "array",
                "items": { "type": "string", "minLength": 1, "maxLength": 140 },
                "minItems": 1,
                "maxItems": 20
              }
            }
          }
        }
      }
    },
    "clarification": { "type": ["string", "null"], "maxLength": 240 }
  }
}
